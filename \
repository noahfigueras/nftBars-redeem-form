const ethers = window.ethers;
const address = '0x50aDB1d3fb9fa3cc2383560D09b5E08027cEBB24';
const contractAbi = [
  "function balanceOf(address) view returns (uint)",
	"function tokenOfOwnerByIndex(address, uint) view returns (uint)"
];
let provider;
let signer;
let contract;

function init() {
  provider = new ethers.providers.Web3Provider(window.ethereum)
  signer = provider.getSigner()
	contract = new ethers.Contract(address, contractAbi, provider);
}

async function getBalance() {
	try{
		const addr = "0xE773382A7574de1C82b1F67099E680c043048708";// await signer.getAddress();
		const balance = await contract.balanceOf(addr);
		// Get tokenIds
		let tokenIds = [];
		for(let i = 0; i < Number(balance); i++) {
			tokenIds.push(await contract.tokenOfOwnerByIndex(addr,i));
		}	
		console.log(tokenIds);
	} catch(err){
		console.log(err);
	}		
}

// Main entry point.
window.addEventListener('load', async () => {
  init();
	getBalance();
});

